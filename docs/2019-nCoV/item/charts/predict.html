<!DOCTYPE html>
<html>
    <head>
        <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?fefb7ff4c65399524bc151da04f6c52a";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
        </script>
            
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta http-equiv="Content-Type" content="charset=utf-8" />
        <title>2019nCoV</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
        <link rel="icon" href="../../assets/img/icon.png" type="image/x-icon"/>
        <!-- Fonts and icons -->
        <script src="../../assets/js/plugin/webfont/webfont.min.js"></script>
        <script>
            WebFont.load({
                google: {"families":["Open+Sans:300,400,600"]},
                custom: {"families":["Font Awesome 5 Solid", "Font Awesome 5 Regular"], urls: ['../../assets/css/fonts.css']},
                active: function() {
                    sessionStorage.fonts = true;
                }
            });
        </script>
        <!-- CSS Files -->
        <link rel="stylesheet" href="../../assets/css/bootstrap.min.css">
        <link rel="stylesheet" href="../../assets/css/azzara.min.css">
    </head>
    <body>
        <div class="wrapper">
            <div class="main-header" data-background-color="purple">
                <!-- Logo Header -->
                <div class="logo-header">
                    <a href="../index.html" class="logo">
                        <img src="../../assets/img/logonkdacs.svg" alt="navbar brand" class="navbar-brand">
                    </a>
                    <button class="navbar-toggler sidenav-toggler ml-auto" type="button" data-toggle="collapse" data-target="collapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon">
                            <i class="fa fa-bars"></i>
                        </span>
                    </button>
                    <button class="topbar-toggler more">
                        <i class="fa fa-ellipsis-v"></i>
                    </button>
                    <div class="navbar-minimize">
                        <button class="btn btn-minimize btn-rounded">
                            <i class="fa fa-bars"></i>
                        </button>
                    </div>
                </div>
                <!-- Navbar Header -->
                <nav class="navbar navbar-header navbar-expand-lg">
                    <div class="container-fluid">
                        <ul class="navbar-nav topbar-nav ml-md-auto align-items-center">
                            <li class="nav-item dropdown hidden-caret">
                                <a class="nav-link dropdown-toggle" href="#" id="messageDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fa fa-info"></i>
                                </a>
                                <ul class="dropdown-menu animated fadeIn" aria-labelledby="infoDropdown">
                                    <li>
                                        <div class="dropdown-item">
                                            <h5 style="text-align:center;margin:0;">NKDACS数据可视化</h5>
                                        </div>
                                        <div class="dropdown-divider"></div>
                                        <div class="dropdown-item">
                                            <p class="text-muted" style="text-align:center;text-indent:0;font-size:14px;margin:0;">陈笑洋 张宸玥 王玉珏 刘城昕 马佳明</p>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown hidden-caret">
                                <a class="dropdown-toggle profile-pic" data-toggle="dropdown" href="#" aria-expanded="false">
                                    <div class="avatar-sm">
                                        <img src="../../assets/img/nankai.jpg" alt="..." class="avatar-img rounded-circle">
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-background"></div>
                <div class="sidebar-wrapper scrollbar-inner">
                    <div class="sidebar-content">
                        <div class="user">
                                <div class="avatar">
                                <img src="../../assets/img/nankai_.png">
                                </div>
                        </div>
                        <ul class="nav">
                            <li class="nav-item">
                                <a href="../index.html">
                                    <i class="fas fa-home"></i>
                                    <p>项目介绍</p>
                                </a>
                            </li>
                            <li class="nav-item active">
                                <a data-toggle="collapse" href="#charts">
                                    <i class="fas fa-chart-bar"></i>
                                    <p>疫情发展</p>
                                    <span class="caret"></span>
                                </a>
                                <div class="collapse show" id="charts">
                                    <ul class="nav nav-collapse">
                                        <li class="active">
                                            <a href="predict.html">
                                                <span class="sub-item">疫情发展预测</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="review.html">
                                               <span class="sub-item">疫情发展回顾</span> 
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- Main Panel -->
            <div class="main-panel">
                <div class="content">
                    <div class="page-inner">
                        <div class="row">
                            <div class="col-md-6 ml-auto mr-auto" style="padding:0 2.5%;">
                                <div class="page-header">
                                    <h4 class="page-title">疫情发展预测</h4>
                                </div>
                                <p>基于传播动力学及黄森忠博士建构的普适SEIR模型，运用“南开大学智英健康数据研究中心”开发的程序EpiSIX，我们对2019-nCoV新型冠状病毒数据做出疫情发展及至今疾控效率的研判。我们依据国家及各地卫健委公布的从2019.12.12日至2020.3.2日的被确诊病例总数的数据链，对疫情发展做出如下5天（2020.3.3 至 2020.3.7）的区间预测及可能的停时(即疫情结束时间点)的估计。</p>
                                <div class="c">
                                    <p style="text-indent:0;font-size:18px"><i class="fas fa-chevron-right" style="margin-right:5px;"></i>新冠肺炎确诊病例数时序区间预测图</p>
                                    <div class="c-height">
                                        <div class="chart" id="mainPredict"></div>
                                    </div>
                                    <div class="nav-item">
                                        <select class="selectpicker" id="dropdown" style="width:100px;">
                                            <option value=0 selected="">北京</option>
                                            <option value=1>天津</option>
                                            <option value=2>重庆</option>
                                            <option value=3>广东</option>
                                            <option value=4>浙江</option>
                                            <option value=5>湖南</option>
                                            <option value=6>河南</option>
                                            <option value=7>江苏</option>
                                            <option value=8>江西</option>
                                            <option value=9>安徽</option>
                                        </select>
                                    </div>
                                    <div class="c-height">
                                        <div class="chart" id="extraPredict"></div>
                                </div>
                                </div>
                            </br>
                                <div class="c">
                                    <p style="text-indent:0;font-size:18px"><i class="fas fa-chevron-right" style="margin-right:5px;"}></i>新冠肺炎新增治愈/新增确诊比值时序图</p>
                                    <div class="c-height">
                                        <div class="chart" id="addminutt"></div>
                                    </div>
                                </div>
                            </br>
                                <div class="c">
                                    <p style="text-indent:0;font-size:18px"><i class="fas fa-chevron-right" style="margin-right:5px;"></i>新冠肺炎累计确诊增长率时序图</p>
                                    <div class="c-height">
                                        <div class="chart" id="add"></div>
                                    </div>
                                    <div class="card">
                                        <div class="card-body">
                                            <p style="margin:0;">总体结论: 大部分都落在预测区间附近，但有少数几个偏离预测区间下界较多(4%左右)。这说明全国各地，每天确诊的实际数据均在下坡，是疫情处于受控状态的特征。</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="c">
                                    <p style="text-indent:0;font-size:18px"><i class="fas fa-chevron-right" style="margin-right:5px;"></i>新冠肺炎各省市停时日期图</p>
                                    <div class="nav-item">
                                        <select class="selectpicker" id="dropdown1" style="width:100px;">
                                            <option value=0 >东北</option>
                                            <option value=1>华东</option>
                                            <option value=2>华北</option>
                                            <option value=3>华中</option>
                                            <option value=4>华南</option>
                                            <option value=5>西南</option>
                                            <option value=6>西北</option>
                                            
                                           
                                        </select>
                                    </div>
                                    <div class="c-height">
                                        <div class="chart" id="tingshi"></div>
                                    </div>
                                    <div class="card">
                                        <div class="card-body">
                                            <p style="margin:0;">停时指不再有新增确诊病例的日期，海外输入病例不计入统计。</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <a href="../charts/review.html">
                                <button class="btn btn-secondary">疫情发展回顾</button>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--   Core JS Files   -->
        <script src="../../assets/js/core/jquery.3.2.1.min.js"></script>
        <script src="../../assets/js/core/popper.min.js"></script>
        <script src="../../assets/js/core/bootstrap.min.js"></script>
        <!-- jQuery UI -->
        <script src="../../assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
        <script src="../../assets/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>
        <!-- Chart JS -->
        <script src="../../assets/js/plugin/chart.js/chart.min.js"></script>
        <!-- jQuery Scrollbar -->
        <script src="../../assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>
        <!-- Azzara JS -->
        <script src="../../assets/js/ready.min.js"></script>
        <!-- echart JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.6.0/echarts-en.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.6.0/echarts-en.common.js"></script>
       
        <!-- Import Data -->
        <script type="text/javascript">
            function dataJson(fileData) {
                data = fileData;
            }
        </script>
        <script type="text/javascript" src="./data.json?cb=dataJson"></script>
        <!-- Process Data -->
        <script type="text/javascript">
            dateReal=[];dateWithPredict=[];total=[];hubei=[];wuhan=[];zhejiang=[];others=[];jjj=[];totalDelta=[];totalLow=[];hubeiDelta=[];hubeiLow=[];wuhanDelta=[];wuhanLow=[];othersDelta=[];othersLow=[];zhejiangDelta=[];zhejiangLow=[];jjjDelta=[];jjjLow=[];
            function addData(date,r0,r1,r2,r3,r4,r5,p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12){ 
                dateWithPredict.push(date);
                total.push(r0);
                hubei.push(r1);
                wuhan.push(r2);
                others.push(r3);
                zhejiang.push(r4);
                jjj.push(r5);
                othersDelta.push(p1-p2);
                othersLow.push(p2);
                zhejiangDelta.push(p3-p4);
                zhejiangLow.push(p4);
                jjjDelta.push(p5-p6);
                jjjLow.push(p6);
                totalDelta.push(p7-p8);
                totalLow.push(p8);
                hubeiDelta.push(p9-p10);
                hubeiLow.push(p10);
                wuhanDelta.push(p11-p12);
                wuhanLow.push(p12);
            };
            delta = 9;
            n = 0;
            rdays = data["real"].length;
            pdays = data["predictive"].length;
            for (i = pdays-1; i > -1; i--) {
                if (data["real"][rdays-delta]["date"] == data["predictive"][i]["date"]){n = i;break;}
            };
            for (i = 0; i < rdays+pdays-n-delta; i++) {
                if (i < rdays-delta) {
                    addData(data["real"][i]["date"],
                    data["real"][i]["diagnosis"],data["real"][i]["hubei"],data["real"][i]["wuhan"],
                    data["real"][i]["qita"],data["real"][i]["zhejiang"],data["real"][i]["jjj"],
                    '_','_','_','_','_','_','_','_','_','_','_','_');
                } else if (i < rdays) {
                    j = i+delta-rdays+n;
                    addData(data["real"][i]["date"],
                    data["real"][i]["diagnosis"],data["real"][i]["hubei"],data["real"][i]["wuhan"],
                    data["real"][i]["qita"],data["real"][i]["zhejiang"],data["real"][i]["jjj"],
                    data["predictive"][j]["qitashang"],data["predictive"][j]["qitaxia"],
                    data["predictive"][j]["zhejiangshang"],data["predictive"][j]["zhejiangxia"],
                    data["predictive"][j]["jjjshang"],data["predictive"][j]["jjjxia"],
                    data["predictive"][j]["quanguoshang"],data["predictive"][j]["quanguoxia"],
                    data["predictive"][j]["hubeishang"],data["predictive"][j]["hubeixia"],
                    data["predictive"][j]["wuhanshang"],data["predictive"][j]["wuhanxia"]);
                } else {
                    j = i+delta-rdays+n;
                    addData(data["predictive"][j]["date"],
                    '_','_','_','_','_','_',
                    data["predictive"][j]["qitashang"],data["predictive"][j]["qitaxia"],
                    data["predictive"][j]["zhejiangshang"],data["predictive"][j]["zhejiangxia"],
                    data["predictive"][j]["jjjshang"],data["predictive"][j]["jjjxia"],
                    data["predictive"][j]["quanguoshang"],data["predictive"][j]["quanguoxia"],
                    data["predictive"][j]["hubeishang"],data["predictive"][j]["hubeixia"],
                    data["predictive"][j]["wuhanshang"],data["predictive"][j]["wuhanxia"]);
                }
            };
            
            lineX = []; lineY1 = [];lineY2 = [];lineY3 = []; var a=0;
            for (i = 0; i < rdays; i++) {
                lineX.push(data["real"][i]["date"]);
                a=(data["real"][i]["diagnosis"]-data["real"][(i-1<0)?0:i-1]["diagnosis"])/data["real"][(i-1<0)?0:i-1]["diagnosis"];
                lineY1.push(a.toFixed(2));
                a=(data["real"][i]["hubei"]-data["real"][(i-1<0)?0:i-1]["hubei"])/data["real"][(i-1<0)?0:i-1]["hubei"];
                lineY2.push(a.toFixed(2));
                a=(data["real"][i]["wuhan"]-data["real"][(i-1<0)?0:i-1]["wuhan"])/data["real"][(i-1<0)?0:i-1]["wuhan"];
                lineY3.push(a.toFixed(2));
            }
            
            addminut=[];addminuthubei=[];addminutothers=[];
            for (i = 0; i < rdays; i++) {
                a=data["real"][i]["add-cure"]/data["real"][i]["add"];
                addminut.push(a.toFixed(2));
                a=data["real"][i]["add-cure-hubei"]/data["real"][i]["add-hubei"];
                addminuthubei.push(a.toFixed(2));
                a=data["real"][i]["add-cure-qita"]/data["real"][i]["add-qita"];
               addminutothers.push(a.toFixed(2));
            }


        </script>
        <!-- select -->
        <script type="text/javascript">
            choose=["北京","天津","重庆","广东","浙江","湖南","河南","江苏","江西","安徽"];
            choosereal=["beijing","tianjin","chongqing","guangdong","zhejiang",
            "hunan","henan","jiangsu","jiangxi","anhui"];
            chooseshang=["beijingshang","tianjinshang","chongqingshang","guangdongshang","zhejiangshang",
            "hunanshang","henanshang","jiangsushang","jiangxishang","anhuishang"];
            choosexia=["beijingxia","tianjinxia","chongqingxia","guangdongxia","zhejiangxia",
            "hunanxia","henanxia","jiangsuxia","jiangxixia","anhuixia"];
            var myChart;
            function selectChart(n){
                shengfen=choose[n];
                NN=0;
                for (var i = 0; i < choose.length; i++) {
                    if(choose[i]==shengfen){
                        NN=i
                    }
                }
                    function addDatachoose(date,r,pup,plow){ 
                        totalchoose.push(r);
                        totalDeltachoose.push(pup-plow);
                        totalLowchoose.push(plow);
                    };
                    delta = 4;
                    n = 0;
                    rdays = data["real"].length;
                    pdays = data["predictive"].length;
                    for (i = pdays-1; i > -1; i--) {
                        if (data["real"][rdays-delta]["date"] == data["predictive"][i]["date"]){n = i;break;}
                    };
                    function addDataN(N){
                        totalchoose=[];totalDeltachoose=[];totalLowchoose=[];
                        for (i = 0; i < rdays+pdays-n-delta; i++) {
                            if (i < rdays-delta) {
                                addDatachoose(data["real"][i]["date"],
                                data["real"][i][choosereal[N]],
                                '_','_');
                            } else if (i < rdays) {
                                j = i+delta-rdays+n;
                                addDatachoose(data["real"][i]["date"],
                                data["real"][i][choosereal[N]],
                                data["predictive"][j][chooseshang[N]],data["predictive"][j][choosexia[N]]);
                            } else {
                                j = i+delta-rdays+n;
                                addDatachoose(data["predictive"][j]["date"],
                                '_',
                                data["predictive"][j][chooseshang[N]],data["predictive"][j][choosexia[N]]);
                            }
                        }
                    }
                    addDataN(NN);
                    //if (myChart != null && myChart != "" && myChart != undefined) {myChart.dispose();}
                    myChart = echarts.init(document.getElementById('extraPredict'));
                    option = {
                        backgroundColor: 'transparent',
                        legend: {
                            right: '5%',
                            data: [shengfen]
                        },
                        grid: {
                            left: 0,
                            right: 15,
                            top: '15%',
                            bottom: '10%',
                            containLabel: true
                        },
                        tooltip: {
                            trigger: 'axis',
                            formatter: function(params) {
                                res=params[0].name+'<br>';
                                for (i=0;i<params.length/3;i++) {
                                    res+=params[3*i].seriesName+': '+params[3*i].value+'<br>';
                                    lower=params[3*i+1].value;
                                    upper=(isNaN(params[3*i+2].value))?'_':lower+params[3*i+2].value;
                                    res+=params[3*i+1].seriesName+'预测区间: ['+lower+', '+upper+']<br>';
                                };
                                return res
                            }
                        },
                        series: [
                            {   name: shengfen,
                                type: 'line',
                                symbolSize: 4,
                                symbol: 'rect',
                                itemStyle: {color:'rgba(255,37,117,0.7)',borderColor:'rgba(255,37,117,0.5)',borderWidth:2},
                                data: totalchoose
                            },
                            {   name: shengfen, //下界
                                type: 'line',
                                data: totalLowchoose,
                                stack: '预测',
                                itemStyle: {color:'rgba(255,37,117,0.7)',borderColor:'rgba(255,37,117,0.5)',borderWidth:1},
                                lineStyle: {opacity: 0}
                            },
                            {   name: shengfen, //区间长度
                                type: 'line',
                                data: totalDeltachoose,
                                stack: '预测',
                                itemStyle: {color:'rgba(255,37,117,0.7)',borderColor:'rgba(255,37,117,0.5)',borderWidth:1},
                                lineStyle: {opacity: 0},
                                areaStyle: {color: '#FFE9EE',opacity: 0.8}
                            }
                        ],
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            axisTick: {
                                show: false
                            },
                            axisLine: {
                                lineStyle: {
                                    color: '#566573'
                                }
                            },
                            axisLabel: {
                                fontSize: 11
                            },
                            data: dateWithPredict
                        },
                        yAxis: {
                            name:"病例数",
                            type: 'value',
                            nameTextStyle: {
                                verticalAlign: 'middle'
                            },
                            axisLine: {
                                lineStyle: {
                                    color: '#566573'
                                }
                            },
                            axisLabel: {
                                fontSize: 8.5,
                                rotate:60
                            },
                            scale: true
                        },
                        dataZoom: {
                            type: 'slider',
                            xAxisIndex: [0],
                            height: '6%',
                            bottom: '2%',
                            start: 50,
                            end: 100,
                            showDetail: false,
                            handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',
                            borderColor: '#90979c'
                        }
                    };
                    myChart.setOption(option);
            }
            selectChart(0);
        </script>
       
        <script type="text/javascript">
            var myChart1 = echarts.init(document.getElementById('mainPredict'));
            var myChart3 = echarts.init(document.getElementById('addminutt'));
            var myChart4 = echarts.init(document.getElementById('add'));
            //var myChart5 = echarts.init(document.getElementById('tingshi'));
            option1 = {
                backgroundColor: 'transparent',
                legend: {
                    right: '5%',
                    data: ['全国','湖北','武汉']
                },
                grid: {
                    left: 0,
                    right: 15,
                    top: '15%',
                    bottom: '10%',
                    containLabel: true
                },
                tooltip: {
                    trigger: 'axis',
                    formatter: function(params) {
                        res=params[0].name+'<br>';
                        for (i=0;i<params.length/3;i++) {
                            res+=params[3*i].seriesName+': '+params[3*i].value+'<br>';
                            lower=params[3*i+1].value;
                            upper=(isNaN(params[3*i+2].value))?'_':lower+params[3*i+2].value;
                            res+=params[3*i+1].seriesName+'预测区间: ['+lower+', '+upper+']<br>';
                        };
                        return res
                    }
                },
                series: [
                    {   name: '全国',
                        type: 'line',
                        symbolSize: 4,
                        symbol: 'rect',
                        itemStyle: {color:'rgba(255,37,117,0.7)',borderColor:'rgba(255,37,117,0.5)',borderWidth:2},
                        data: total
                    },
                    {   name: '全国', //下界
                        type: 'line',
                        data: totalLow,
                        stack: '全国预测',
                        itemStyle: {color:'rgba(255,37,117,0.7)',borderColor:'rgba(255,37,117,0.5)',borderWidth:1},
                        lineStyle: {opacity: 0}
                    },
                    {   name: '全国', //区间长度
                        type: 'line',
                        data: totalDelta,
                        stack: '全国预测',
                        itemStyle: {color:'rgba(255,37,117,0.7)',borderColor:'rgba(255,37,117,0.5)',borderWidth:1},
                        lineStyle: {opacity: 0},
                        areaStyle: {color: '#FFE9EE',opacity: 0.8}
                    },
                    {   name: '湖北',
                        type: 'line',
                        symbolSize: 4,
                        symbol: 'rect',
                        itemStyle: {color:'rgba(0,133,245,0.7)',borderColor:'rgba(0,133,245,0.5)',borderWidth:2},
                        data: hubei
                    },
                    {   name: '湖北', //下界
                        type: 'line',
                        data: hubeiLow,
                        stack: '湖北预测',
                        itemStyle: {color:'rgba(0,133,245,0.7)',borderColor:'rgba(0,133,245,0.5)',borderWidth:1},
                        lineStyle: {opacity: 0}
                    },
                    {   name: '湖北', //区间长度
                        type: 'line',
                        data: hubeiDelta,
                        stack: '湖北预测',
                        itemStyle: {color:'rgba(0,133,245,0.7)',borderColor:'rgba(0,133,245,0.5)',borderWidth:1},
                        lineStyle: {opacity: 0},
                        areaStyle: {color: '#E7FAFA',opacity: 0.8}
                    },
                    {   name: '武汉',
                        type: 'line',
                        symbolSize: 4,
                        symbol: 'rect',
                        itemStyle: {color:'rgba(255,170,0,0.7)',borderColor:'rgba(255,170,0,0.5)',borderWidth:2},
                        data: wuhan
                    },
                    {   name: '武汉', //下界
                        type: 'line',
                        data: wuhanLow,
                        stack: '武汉预测',
                        itemStyle: {color:'rgba(255,170,0,0.7)',borderColor:'rgba(255,170,0,0.5)',borderWidth:1},
                        lineStyle: {opacity: 0}
                    },
                    {   name: '武汉', //区间长度
                        type: 'line',
                        data: wuhanDelta,
                        stack: '武汉预测',
                        itemStyle: {color:'rgba(255,170,0,0.7)',borderColor:'rgba(255,170,0,0.5)',borderWidth:1},
                        lineStyle: {opacity: 0},
                        areaStyle: {color: '#FFF3B2',opacity: 0.8}
                    }
                ],
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#566573'
                        }
                    },
                    axisLabel: {
                        fontSize: 11
                    },
                    data: dateWithPredict
                },
                yAxis: {
                    name:"病例数",
                    type: 'value',
                    nameTextStyle: {
                        verticalAlign: 'middle'
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#566573'
                        }
                    },
                    axisLabel: {
                        fontSize: 8.5,
                        rotate:60
                    },
                    scale: true
                },
                dataZoom: {
                    type: 'slider',
                    xAxisIndex: [0],
                    height: '6%',
                    bottom: '2%',
                    start: 50,
                    end: 100,
                    showDetail: false,
                    handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',
                    borderColor: '#90979c'
                }
            };
            option2 = {
                backgroundColor: 'transparent',
                legend: {
                    right: '5%',
                    data: ['浙江']
                },              
                grid: {
                    left: 0,
                    right: 15,
                    top: '15%',
                    bottom: '10%',
                    containLabel: true
                },
                tooltip: {
                    trigger: 'axis',
                    formatter: function(params) {
                        res=params[0].name+'<br>';
                        for (i=0;i<params.length/3;i++) {
                            res+=params[3*i].seriesName+': '+params[3*i].value+'<br>';
                            lower=params[3*i+1].value;
                            upper=(isNaN(params[3*i+2].value))?'_':lower+params[3*i+2].value;
                            res+=params[3*i+1].seriesName+'预测区间: ['+lower+', '+upper+']<br>';
                        };
                        return res
                    }
                },
                series: [
                    {   name: '浙江',
                        type: 'line',
                        symbolSize: 4,
                        symbol: 'rect',
                        itemStyle: {color:'rgba(0,133,245,0.7)',borderColor:'rgba(0,133,245,0.5)',borderWidth:2},
                        data: zhejiang
                    },
                    {   name: '浙江', //下界
                        type: 'line',
                        data: zhejiangLow,
                        stack: '浙江预测',
                        itemStyle: {color:'rgba(0,133,245,0.7)',borderColor:'rgba(0,133,245,0.5)',borderWidth:2},
                        lineStyle: {opacity: 0}
                    },
                    {   name: '浙江', //区间长度
                        type: 'line',
                        data: zhejiangDelta,
                        stack: '浙江预测',
                        itemStyle: {color:'rgba(0,133,245,0.7)',borderColor:'rgba(0,133,245,0.5)',borderWidth:2},
                        lineStyle: {opacity: 0},
                        areaStyle: {color: '#E7FAFA',opacity: 0.8}
                    }
                ],
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#566573'
                        }
                    },
                    axisLabel: {
                        fontSize: 11
                    },
                    data: dateWithPredict
                },
                yAxis: {
                    name:"病例数",
                    type: 'value',
                    nameTextStyle: {
                        verticalAlign: 'middle'
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#566573'
                        }
                    },
                    axisLabel: {
                        fontSize: 8.5,
                        rotate:60
                    },
                    scale: true
                },

                dataZoom: {
                    type: 'slider',
                    xAxisIndex: [0],
                    height: '6%',
                    bottom: '2%',
                    start: 50,
                    end: 100,
                    showDetail: false,
                    handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',
                    borderColor: '#90979c'
                }
            };
            option3 = {
                backgroundColor:'transparent',

                legend: {
                        data: ['全国', '湖北','湖北以外全国各地'],
                        right: '5%',
                        
                    },
                title: {
                    text: '',
                    subtext: '',
                    x: 'center'
                },
                tooltip: {
                    trigger: 'axis'
                },
                grid: {
                    left: 0,
                    right: 15,
                    top: '15%',
                    bottom: '10%',
                    containLabel: true
                },
                
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#566573'
                        }
                    },
                    axisLabel: {
                        fontSize: 11,
                        formatter: function(params) {
                            return params.split(' ')[0] 
                        }
                    },
                    data: lineX,
                },
             
                yAxis: {
                    name: "指标",
                    type: 'value',
                    nameTextStyle: {
                        verticalAlign: 'middle'
                    },
                    axisLabel: {
                        formatter: '{value}',
                        fontSize: 11,
                        
                    },
                   
                    axisLine: {
                        lineStyle: {
                            color: '#566573'
                        }
                    },
                    scale: true
                },
               dataZoom: {
                    type: 'slider',
                    xAxisIndex: [0],
                    height: '6%',
                    bottom: '2%',
                    start: 50,
                    end: 100,
                    showDetail: false,
                    handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',
                    borderColor: '#90979c'
                },
                series: [{
                    name: '全国',
                    type: 'line',
                    color: 'rgba(255,37,117)',
                    smooth: true,
                    areaStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: 'rgba(255,37,117,0.3)'
                            }, {
                                offset: 0.8,
                                color: 'rgba(255,37,117,0)'
                            }], false),
                            shadowColor: 'rgba(0, 0, 0, 0.1)',
                            shadowBlur: 10
                        }
                    },
                    symbol: 'circle',
                    symbolSize: 5,
                    data: addminut
                },{
                    name: '湖北',
                    type: 'line',
                    color: 'rgba(0,133,245)',
                    smooth: true,
                    areaStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: 'rgba(0,133,245,0.3)'
                            }, {
                                offset: 0.8,
                                color: 'rgba(0,133,245,0)'
                            }], false),
                            shadowColor: 'rgba(0, 0, 0, 0.1)',
                            shadowBlur: 10
                        }
                    },
                    symbol: 'circle',
                    symbolSize: 5,
                    data: addminuthubei
                },{
                    name: '湖北以外全国各地',
                    type: 'line',
                    color: 'rgba(255,170,0)',
                    smooth: true,
                    areaStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: 'rgba(255,170,0,0.3)'
                            }, {
                                offset: 0.8,
                                color: 'rgba(255,170,0,0)'
                            }], false),
                            shadowColor: 'rgba(0, 0, 0, 0.1)',
                            shadowBlur: 10
                        }
                    },
                    symbol: 'circle',
                    symbolSize: 5,
                    data: addminutothers
                }]
            };
            option4 = {
                backgroundColor:'transparent',
                legend: {
                        data: ['全国', '湖北','武汉'],
                        right: '5%',
                        
                    },
                title: {
                    text: '',
                    subtext: '',
                    x: 'center'
                },
                tooltip: {
                    trigger: 'axis'
                },
               grid: {
                    left: 0,
                    right: 15,
                    top: '15%',
                    bottom: '10%',
                    containLabel: true
                },
               
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: lineX,
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#566573'
                        }
                    },
                    axisLabel: {
                        fontSize: 11,
                        formatter: function(params) {
                            return params.split(' ')[0] 
                        }
                    },
                },
                 
                yAxis: {
                    name: "增长率",
                    type: 'value',
                     nameTextStyle: {
                        verticalAlign: 'middle'
                    },
                    axisLabel: {
                        formatter: '{value}',
                        fontSize: 11,
                       
                    },
                    
                    axisLine: {
                        lineStyle: {
                            color: '#566573'
                        }
                    },

                    scale: true

                },


              dataZoom: {
                    type: 'slider',
                    xAxisIndex: [0],
                    height: '6%',
                    bottom: '2%',
                    start: 50,
                    end: 100,
                    showDetail: false,
                    handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',
                    borderColor: '#90979c'
                },
                series: [{
                    name: '全国',
                    type: 'line',
                    color: 'rgba(255,37,117)',
                    smooth: true,
                    areaStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: 'rgba(255,37,117,0.3)'
                            }, {
                                offset: 0.8,
                                color: 'rgba(255,37,117,0)'
                            }], false),
                            shadowColor: 'rgba(0, 0, 0, 0.1)',
                            shadowBlur: 10
                        }
                    },
                    symbol: 'circle',
                    symbolSize: 5,
                    data: lineY1
                },{
                    name: '湖北',
                    type: 'line',
                    color: 'rgba(0,133,245)',
                    smooth: true,
                    areaStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: 'rgba(0,133,245,0.3)'
                            }, {
                                offset: 0.8,
                                color: 'rgba(0,133,245,0)'
                            }], false),
                            shadowColor: 'rgba(0, 0, 0, 0.1)',
                            shadowBlur: 10
                        }
                    },
                    symbol: 'circle',
                    symbolSize: 5,
                    data: lineY2
                },{
                    name: '武汉',
                    type: 'line',
                    color: 'rgba(255,170,0)',
                    smooth: true,
                    areaStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: 'rgba(255,170,0,0.3)'
                            }, {
                                offset: 0.8,
                                color: 'rgba(255,170,0,0)'
                            }], false),
                            shadowColor: 'rgba(0, 0, 0, 0.1)',
                            shadowBlur: 10
                        }
                    },
                    symbol: 'circle',
                    symbolSize: 5,
                    data: lineY3
                }]
            };

           
//初始化
           
          


            var charts = { // 按顺序排列从大到小
  cityList: ["湖南","四川","河北","广东","江西","河南","黑龙江","北京","江苏","重庆","安徽","山东","福建","陕西","浙江","山西","天津",
              // "云南","贵州","辽宁","吉林","海南","广西","内蒙古","宁夏","甘肃","新疆",
              "上海"],
  cityList11:["黑龙江","吉林","辽宁"],
  cityData11:[17,3,3],
  cityList22:["江西","江苏","安徽","山东","福建","浙江","上海"],
  cityData22:[21,15,11,10,10,9,2],
  cityList33:["河北","北京","山西","天津","内蒙古"],
  cityData33:[24,15,4,3,3],
  cityList44:["湖北","湖南","河南"],
  cityData44:[35,29,20],
  cityList55:["广东","广西","海南"],
  cityData55:[21,3,3],
  cityList66:["四川","重庆","贵州","云南"],
  cityData66:[25,14,3,3],
  cityList77:["陕西","甘肃","宁夏","新疆"],
  cityData77:[10,3,3,3],
  

  cityData: [29,25,24,21,21,20,17,15,15,14,13,10,10,10,9,4,3,
                  // 3,3,3,3,3,3,3,3,3,3,
                  2]
}
var label11 = ["2020.3.17","2020.3.17","2020.4.01"];
var label22 = ["2020.3.16","2020.3.23","2020.3.24","2020.3.24","2020.3.27","2020.3.29","2020.4.05"];
var label33 = ["2020.3.17","2020.3.17","2020.3.18","2020.3.29","2020.4.08"]
var label44 = ["2020.4.04","2020.4.13","2020.4.21"];
var label55 = ["2020.3.17","2020.3.17","2020.4.05"];
var label66 = ["2020.3.17","2020.3.17","2020.3.28","2020.4.09"];
var label77 = ["2020.3.17","2020.3.17","2020.3.17","2020.3.24"];
var labelall=[label11,label22,label33,label44,label55,label66,label77];

var top10CityList11 = charts.cityList11
var top10CityData11 = charts.cityData11
var top10CityList22 = charts.cityList22
var top10CityData22 = charts.cityData22
var top10CityList33 = charts.cityList33
var top10CityData33 = charts.cityData33
var top10CityList44 = charts.cityList44
var top10CityData44 = charts.cityData44
var top10CityList55 = charts.cityList55
var top10CityData55 = charts.cityData55
var top10CityList66 = charts.cityList66
var top10CityData66 = charts.cityData66
var top10CityList77 = charts.cityList77
var top10CityData77 = charts.cityData77
var top10CityListall=[top10CityList11,top10CityList22,top10CityList33,top10CityList44,top10CityList55,top10CityList66,top10CityList77]
var top10CityDataall=[top10CityData11,top10CityData22,top10CityData33,top10CityData44,top10CityData55,top10CityData66,top10CityData77]
var label = ["2020.3.16","2020.3.17",
             // "2020.3.17","2020.3.17","2020.3.17","2020.3.17","2020.3.17","2020.3.17","2020.3.17","2020.3.17","2020.3.17","2020.3.17","2020.3.17",
             "2020.3.18","2020.3.23","2020.3.24","2020.3.24","2020.3.24","2020.3.27","2020.3.28","2020.3.29","2020.3.29","2020.4.1","2020.4.4","2020.4.5","2020.4.5","2020.4.8","2020.4.9","2020.4.13"]//顺序颠倒过来
// var color = ['rgba(248,195,248', 'rgba(100,255,249', 'rgba(135,183,255', 'rgba(248,195,248', 'rgba(100,255,249','rgba(208,230,165','rgba(248,195,248','rgba(248,195,248', 'rgba(100,255,249', 'rgba(135,183,255', 'rgba(248,195,248', 'rgba(100,255,249','rgba(208,230,165',
    // 'rgba(248,195,248','rgba(248,195,248', 'rgba(100,255,249', 'rgba(135,183,255', 'rgba(248,195,248', 'rgba(100,255,249','rgba(208,230,165','rgba(248,195,248','rgba(248,195,248', 'rgba(100,255,249', 'rgba(135,183,255', 
     // 'rgba(248,195,248', 'rgba(100,255,249','rgba(208,230,165','rgba(248,195,248','rgba(135,183,255']
//rgba(248,195,248', 'rgba(100,255,249', 'rgba(135,183,255', 'rgba(248,195,248', 'rgba(100,255,249','rgba(100,255,249'
var color11 = ['rgba(248,195,248', 'rgba(100,255,249', 'rgba(135,183,255'] ;var color22 = ['rgba(248,195,248', 'rgba(100,255,249', 'rgba(135,183,255','rgba(248,195,248', 'rgba(100,255,249', 'rgba(135,183,255','rgba(248,195,248'] ;var color33 = ['rgba(248,195,248', 'rgba(100,255,249', 'rgba(135,183,255','rgba(248,195,248', 'rgba(100,255,249'] ;var color44 = ['rgba(248,195,248', 'rgba(100,255,249', 'rgba(135,183,255'] ;var color55= ['rgba(248,195,248', 'rgba(100,255,249', 'rgba(135,183,255'] ;var color66 = ['rgba(248,195,248', 'rgba(100,255,249', 'rgba(135,183,255','rgba(248,195,248'] ;var color77 = ['rgba(248,195,248', 'rgba(100,255,249', 'rgba(135,183,255','rgba(248,195,248'] ;
var colorall= [color11,color22,color33,color44,color55,color66,color77]
let lineY11 = [];let lineY22 = [];let lineY33 = [];let lineY44 = [];let lineY55 = [];let lineY66 = [];let lineY77 = [];
var lineYall =[lineY11,lineY22,lineY33,lineY44,lineY55,lineY66,lineY77];
var dataall =[data11,data22,data33,data44,data55,data66,data77]
//1
for (var i = 0; i < charts.cityList11.length; i++) {
  var x = i
  if (x > color11.length - 1) {
    x = color11.length - 1
  }
  var data11 = {
    name: charts.cityList11[i],
    color: color11[x] + ')',
    value: top10CityData11[i],
    itemStyle: {
      normal: {
        show: true,
        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
          offset: 0,
          color: color11[x] + ', 0.3)'
        }, {
          offset: 1,
          color: color11[x] + ', 1)'
        }], false),
        barBorderRadius: 10
      },
      emphasis: {
        shadowBlur: 15,
        shadowColor: 'rgba(0, 0, 0, 0.1)'
      }
    }
  }
  lineY11.push(data11)
}

console.log(lineY11)
//2
for (var i = 0; i < charts.cityList22.length; i++) {
  var x = i
  if (x > color22.length - 1) {
    x = color22.length - 1
  }
  var data22 = {
    name: charts.cityList22[i],
    color: color22[x] + ')',
    value: top10CityData22[i],
    itemStyle: {
      normal: {
        show: true,
        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
          offset: 0,
          color: color22[x] + ', 0.3)'
        }, {
          offset: 1,
          color: color22[x] + ', 1)'
        }], false),
        barBorderRadius: 10
      },
      emphasis: {
        shadowBlur: 15,
        shadowColor: 'rgba(0, 0, 0, 0.1)'
      }
    }
  }
  lineY22.push(data22)
}
//3
for (var i = 0; i < charts.cityList33.length; i++) {
  var x = i
  if (x > color33.length - 1) {
    x = color33.length - 1
  }
  var data33 = {
    name: charts.cityList33[i],
    color: color33[x] + ')',
    value: top10CityData33[i],
    itemStyle: {
      normal: {
        show: true,
        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
          offset: 0,
          color: color33[x] + ', 0.3)'
        }, {
          offset: 1,
          color: color33[x] + ', 1)'
        }], false),
        barBorderRadius: 10
      },
      emphasis: {
        shadowBlur: 15,
        shadowColor: 'rgba(0, 0, 0, 0.1)'
      }
    }
  }
  lineY33.push(data33)
}

//4
for (var i = 0; i < charts.cityList44.length; i++) {
  var x = i
  if (x > color44.length - 1) {
    x = color44.length - 1
  }
  var data44 = {
    name: charts.cityList44[i],
    color: color44[x] + ')',
    value: top10CityData44[i],
    itemStyle: {
      normal: {
        show: true,
        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
          offset: 0,
          color: color44[x] + ', 0.3)'
        }, {
          offset: 1,
          color: color44[x] + ', 1)'
        }], false),
        barBorderRadius: 10
      },
      emphasis: {
        shadowBlur: 15,
        shadowColor: 'rgba(0, 0, 0, 0.1)'
      }
    }
  }
  lineY44.push(data44)
}


//5
for (var i = 0; i < charts.cityList55.length; i++) {
  var x = i
  if (x > color55.length - 1) {
    x = color55.length - 1
  }
  var data55 = {
    name: charts.cityList55[i],
    color: color55[x] + ')',
    value: top10CityData55[i],
    itemStyle: {
      normal: {
        show: true,
        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
          offset: 0,
          color: color55[x] + ', 0.3)'
        }, {
          offset: 1,
          color: color55[x] + ', 1)'
        }], false),
        barBorderRadius: 10
      },
      emphasis: {
        shadowBlur: 15,
        shadowColor: 'rgba(0, 0, 0, 0.1)'
      }
    }
  }
  lineY55.push(data55)
}

//6
for (var i = 0; i < charts.cityList66.length; i++) {
  var x = i
  if (x > color66.length - 1) {
    x = color66.length - 1
  }
  var data66 = {
    name: charts.cityList66[i],
    color: color66[x] + ')',
    value: top10CityData66[i],
    itemStyle: {
      normal: {
        show: true,
        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
          offset: 0,
          color: color66[x] + ', 0.3)'
        }, {
          offset: 1,
          color: color66[x] + ', 1)'
        }], false),
        barBorderRadius: 10
      },
      emphasis: {
        shadowBlur: 15,
        shadowColor: 'rgba(0, 0, 0, 0.1)'
      }
    }
  }
  lineY66.push(data66)
}

//7
for (var i = 0; i < charts.cityList77.length; i++) {
  var x = i
  if (x > color77.length - 1) {
    x = color77.length - 1
  }
  var data77 = {
    name: charts.cityList77[i],
    color: color77[x] + ')',
    value: top10CityData77[i],
    itemStyle: {
      normal: {
        show: true,
        color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
          offset: 0,
          color: color77[x] + ', 0.3)'
        }, {
          offset: 1,
          color: color77[x] + ', 1)'
        }], false),
        barBorderRadius: 10
      },
      emphasis: {
        shadowBlur: 15,
        shadowColor: 'rgba(0, 0, 0, 0.1)'
      }
    }
  }
  lineY77.push(data77)
}

 function selectChart1(nn){


                 top10CityList = top10CityListall[nn];
                 top10CityData = top10CityDataall[nn];
                 label=labelall[nn];
                 color=colorall[nn];
                 lineY=lineYall[nn];
                 datatingshi=dataall[nn];

var mychart5 = echarts.init(document.getElementById('tingshi'));                   
option5= {
    backgroundColor:'transparent',
  title: {
    show: false
  },
  
  grid: {
    borderWidth: 0,
    top: '10%',
    left: '5%',
    right: '15%',
    bottom: '3%'
  },
  color: color,
  yAxis: [{
    type: 'category',
    inverse: true,
    axisTick: {
      show: false
    },
    axisLine: {
      show: false
    },
    axisLabel: {
      show: false,
      inside: false
    },
    data: top10CityList
  }, {
    type: 'category',
    axisLine: {
      show: false
    },
    axisTick: {
      show: false
    },
    axisLabel: {
      show: true,
      inside: false,
      right:'50%',
      textStyle: {
        color: '#607B8B',
        fontSize: '14',
        fontFamily: 'PingFangSC-Regular'
      },
      formatter: function (val) {
        return `${val}`
      }
    },
    splitArea: {
      show: false
    },
    splitLine: {
      show: false
    },
    data: label
  }],
  xAxis: {
    type: 'value',
    axisTick: {
      show: false
    },
    axisLine: {
      show: false
    },
    splitLine: {
      show: false
    },
    axisLabel: {
      show: false
    }
  },
  series: [{
    name: '',
    type: 'bar',
    zlevel: 2,
    barWidth: '10px',
    data: lineY,
    animationDuration: 1500,
    label: {
      normal: {
        color: '#607B8B',//省份的颜色
        show: true,
        position: [0, '-24px'],//改省份的位置的可以放到左边，感觉在上边好看
        textStyle: {
          fontSize: 16
        },
        formatter: function (a, b) {
          return a.name
        }
      }
    }
  }],
  animationEasing: 'cubicOut'
}
mychart5.setOption(option5);
}
 selectChart1(0);
  

//var options = [option11,option22,option44]//,option44,option55,option66,option77
            
            
                     
           



           




            myChart1.setOption(option1);
            myChart3.setOption(option3);
            myChart4.setOption(option4);
            
            charts = [myChart1,myChart,myChart3,myChart4,mychart5];//,myChart5
            $(window).resize(function(){
                for(var i = 0; i < charts.length; i++) {
                    charts[i].resize();
                }
            });
            select=document.getElementById("dropdown");
            select.onchange=function(){
                selectChart(select.value);
            }
           

        </script>
        <script type="text/javascript">
             select1=document.getElementById("dropdown1");
            select1.onchange=function(){
                selectChart1(select1.value);
            }
        </script>
        
    </body>
</html> 
